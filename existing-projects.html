<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Converting Existing Projects &mdash; Scientific Python Cookiecutter 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
    <link rel="canonical" href="http://ukaea.github.io/scientific-python-cookiecutter/existing-projects.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Environments and Package Managers" href="environments.html" />
    <link rel="prev" title="Common Patterns for Tests" href="advanced-testing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Scientific Python Cookiecutter
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="philosophy.html">Philosophy of this Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="preliminaries.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="the-code-itself.html">The Code Itself</a></li>
<li class="toctree-l1"><a class="reference internal" href="guiding-design-principles.html">Guiding Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continous Integration Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-docs.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="including-data-files.html">Including Data Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="publishing-docs.html">Publishing the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="publishing-releases.html">Publishing Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-testing.html">Common Patterns for Tests</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Converting Existing Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#assess-project-maturity">Assess Project Maturity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pick-n-mix">Pick’n’Mix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#full-conversion">Full Conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#version-control">Version control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continuous-integration">Continuous Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments and Package Managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="further-reading.html">Futher Reading</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Scientific Python Cookiecutter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Converting Existing Projects</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/existing-projects.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="converting-existing-projects">
<h1>Converting Existing Projects<a class="headerlink" href="#converting-existing-projects" title="Permalink to this headline">¶</a></h1>
<p>This tutorial assumes that you are starting your Python project from a very
early stage: either a completely fresh project with no source written yet, or a
collection of Python source files with not much else. However, it is a possible
scenario that you have been drawn to this tutorial because it provides an
appealing project layout, and you want to convert an existing project to use it.
It is impossible to provide a generic step-by-step guide to convert any project
to use this structure because the details depend too much on the existing setup
and maturity of the project. In lieu of that, we provide some helpful tips for
solutions to likely challenges you will face during conversion.</p>
<div class="section" id="assess-project-maturity">
<h2>Assess Project Maturity<a class="headerlink" href="#assess-project-maturity" title="Permalink to this headline">¶</a></h2>
<p>The strategies for converting projects loosely fall into two categories.</p>
<ol class="arabic simple">
<li><p>Pick’n’Mix: retain your existing project structure and fill in the gaps with
features from the tutorial/cookiecutter, pulling over the relevant configurations from the cookiecutter template.</p></li>
<li><p>Full conversion: completely ditch your existing project structure in favour
of the cookiecutter scaffolding, bringing over any necessary existing files
in the process.</p></li>
</ol>
<p>Again, there is no hard and fast way to determine which you should use, but a
heuristic for guidance is to consider whether your project contains at least 50%
of tools and configurations recommended by this tutorial. The side menu should
provide an adequate checklist of topics. If you are well above the 50%
threshold, then the Pick’n’Mix is probably for you, while if you are below it,
then a full conversion probably won’t be too painful and will yield benefits.</p>
</div>
<div class="section" id="pick-n-mix">
<h2>Pick’n’Mix<a class="headerlink" href="#pick-n-mix" title="Permalink to this headline">¶</a></h2>
<p>Start by instigating a “dummy” version of the cookiecutter like in
<a class="reference internal" href="preliminaries.html"><span class="doc">Getting Started</span></a>. Although you won’t be directly using the scaffolding that
is generated, it is still valuable to fill out the cookiecutter with information
that fits your project as closely as possible. This will help minimise
configuration when transposing elements back to your project.</p>
<p>Then, briefly skim through the tutorial to find the components that your project
is missing or that you feel could be improved. Follow those sections of the
tutorial, and try to reproduce the results in your project. This will
undoubtedly require pulling over files from the “dummy” cookiecutter scaffolding
you just generated. In some cases, it won’t be obvious from the tutorial which
files or tools you need, so forensic investigation with a trusted search engine
will be required. For example, to set up <code class="docutils literal notranslate"><span class="pre">versioneer</span></code> it will be easiest to
consult <a class="reference external" href="https://github.com/python-versioneer/python-versioneer">the GitHub page</a> and follow the
instructions there, rather than trying to pull each of the files from the
cookiecutter.</p>
<p>It is also likely you will pose the question: should I stick with what I already
have or use what is in this tutorial? This tutorial can’t answer that for you.
The recommendations we make are based on what we deem to be “good practice” in
most cases. However, the criteria for your project might require you to use
different tools, and that is absolutely fine, as long as you are clear what your
criteria are and that the alternate tools fulfill them.</p>
</div>
<div class="section" id="full-conversion">
<h2>Full Conversion<a class="headerlink" href="#full-conversion" title="Permalink to this headline">¶</a></h2>
<p>There are a variety of steps to consider for a full conversion, and they depend
on the degree of existing infrastructure in your project. Follow those that are
applicable to your situation.</p>
<div class="section" id="version-control">
<h3>Version control<a class="headerlink" href="#version-control" title="Permalink to this headline">¶</a></h3>
<p>If the project that you are converting is already under version control, then
you will want to retain the history of the source files you have been working
on. If you use a version control system other than <code class="docutils literal notranslate"><span class="pre">git</span></code>, you will need to
decide if you want to keep using that system (likely less hassle, but then the
release process in this tutorial won’t work) or migrate to using <code class="docutils literal notranslate"><span class="pre">git</span></code> like
this tutorial advises (more hassle as you will need to figure out a conversion
step to make your repository a <code class="docutils literal notranslate"><span class="pre">git</span></code> repository).</p>
<p>If you use git already, this is a bit easier, but there are still many pitfalls,
so use these steps as a guide:</p>
<ol class="arabic">
<li><p>Create a “dummy” cookiecutter directory outside of the directory that your
existing project is in (e.g. put it next to your project’s directory).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> directory_next_to_project
cookiecutter scientific-python-cookiecutter <span class="c1"># this should be cached from before</span>
</pre></div>
</div>
<p>And then fill out the prompts as if it were for your current project, using
the instructions from <a class="reference internal" href="preliminaries.html"><span class="doc">Getting Started</span></a>.  Even though you will not be
directly using this directory for your project, it is helpful to fill out the
cookiecutter prompts accurately so that you can drop in any relevant
configuration files from the cookiecutter with little or no modification.</p>
</li>
<li><p>Change into the cookiecutter-generated directory and initialise a <code class="docutils literal notranslate"><span class="pre">git</span></code>
repo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> cookie_cutter_generated_directory
git init
git branch -m main
git add .
git commit -m <span class="s2">&quot;Scientific Python cookiecutter scaffolding&quot;</span>
</pre></div>
</div>
</li>
<li><p>Move back to your original project repository and add the cookiecutter one as
a remote:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/original_project_directory
git remote add -m main cookiecutter /absolute/or/relative/path/to/cookie_cutter_generated_directory
git fetch cookiecutter
</pre></div>
</div>
</li>
<li><p>Merge in the cookiecutter structure to your project.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># make sure you are on an appropriate branch, probably not main/master</span>
git checkout -b project-structure-update
git merge --allow-unrelated-histories cookiecutter/main
</pre></div>
</div>
<p>Depending on your project setup, there might be file conflicts. You will need
to manually go through the files that git has identified, and resolve those
conflicts. This is somewhat tedious, but less error-prone and no more tedious
than copying over files from the cookiecutter manually with <code class="docutils literal notranslate"><span class="pre">cp</span></code>.</p>
</li>
<li><p>Move your source files into the correct location if they are not already
there. Again, how easy this is will depend on how you have structured you
project up to this point. Regardless, you should use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">mv</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git mv source1.py source2.py package_dir_name/
</pre></div>
</div>
</li>
<li><p>To get the full history of a file that has moved, be aware that you will need
to pass the <code class="docutils literal notranslate"><span class="pre">--follow</span></code> command to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git log --follow  file_that_has_moved.py
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
<div class="section" id="continuous-integration">
<h3>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="advanced-testing.html" class="btn btn-neutral float-left" title="Common Patterns for Tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="environments.html" class="btn btn-neutral float-right" title="Environments and Package Managers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>